<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Schéma géologique</title>
    <style>
	@import url(http://fonts.googleapis.com/css?family=Lobster);
	body {
        
		background-position:top center;
		background-size:cover;
		font-family: 'Lobster', cursive;        
        color:black;
		width:1400px;
		margin:5% auto;
  		font-size: 20px;
      
      }

	  #monCanvas {
		opacity:0.9;
		padding:5px;
		width:100%;
		height: 800px;
        font-family: 'Lobster', cursive;        
        border-radius: 10px;
		background: white;
		box-shadow:1px 1px 12px rgba(0,0,0,0.5);
       	  }
        
      #buttons {
        position: absolute;
        left: stage;
        top: 10px;
      }
      button {
        margin-top: 10px;
        display: block;
      }
    </style>
         
</style>

  </head>
  <body>
      <h1>Isostasie</h1>
      <h2>Choisir une couleur pour différencier les structures ...
      </h2>
	<div id="monCanvas"><div role="presentation" class="kineticjs-content" style="position: relative; display: inline-block; width: 1400px; height: 800px;"><canvas height="800" width="1400" style="padding: 0px; margin: 0px; border: 0px none; background: none repeat scroll 0% 0% transparent; position: absolute; top: 0px; left: 0px; width: 1400px; height: 800px; font-family: 'Lobster','cursive';" ondrop="fonction_drop(event)" ondragover="fonction_dragover"></canvas></div></div>
	<script src="isostasie_fichiers/kinetic-v5.1.0.min.js"></script>
	<script src="isostasie_fichiers/datas5.js"></script>
    <script defer="defer">
        
        var selected_color = 'rgba(255,0,0,1)';
		var stage = new Kinetic.Stage({
			container: 'monCanvas',
			width: 1400,
			height: 800
        });
        

        /*fonction pour écrire des messages sur déplacement*/
       
            
         var textDeplacement = new Kinetic.Text({
        x: 10,
        y: 50,
        fontFamily: 'Lobster',
        fontSize: 24,
        text: '',
        fill: 'black'
      });
        
        
            
       
        
    /*déclaration des couches (layer)*/
        
        
        var layer = new Kinetic.Layer();
		stage.add(layer);
        
        var layer2 = new Kinetic.Layer();
        stage.add(layer2);
        
        var layer3 = new Kinetic.Layer();

   <!-- variable pour définir zone de svg -->
       /*lithospere*/
        var clicpath1 = new Kinetic.Path({
        x: 0,
        y: 0,
        data: 'm 86.5,229.5 110,4.5 49.5,31 28.5,3 c 13.16951,0.20457 26.33701,0.53792 39.5,1 20.01339,0.70256 40.01634,1.70271 60,3 l 9.5,5 2.5,4.5 18.5,19.5 21.5,37 24.5,31 29,23 41,18 32,10.5 49,2 43,-5 29.5,-17.5 23.5,-19.5 22,-32 13.5,-40 10.5,-17 47,-7.5 33,1 78,-43.5 -3.5,188.5 -24,10 -18.5,17 -7.5,11 -24.5,15 -12.5,-1 -28.5,7 -30,19.5 -29,24.5 -30.5,21.5 -36.5,13 -20.5,4.5 c -12.49708,0.33159 -24.99853,0.49828 -37.5,0.5 -17.8375,0.002 -35.67505,-0.33096 -53.5,-1 L 496.5,559 396,505 294.5,486.5 253,466.5 228,448 204.5,437 89,429.5 86.5,229.5 z',
         
          fill: 'green', 
          opacity: 0.5,
          scale: {x:1, y:1},
        draggable: true,       

      });
        
    
   
        
        /*asthenosphere*/ 
        var clicpath2 = new Kinetic.Path({
        x: 00,
        y: 0,
        data: 'm 90.5,606 -2,-176.5 117,10 21,8.5 28.5,18.5 38,20.5 102.5,17.5 103.5,55 44.5,12.5 82.5,-0.5 24,-2.5 34.5,-11.5 30.5,-17 33,-29 28.5,-18.5 19.5,-8 25,-2.5 1.5,1.5 26,-16.5 7.5,-12 19,-16 22,-9.5 -2.5,137.5 -68.5,70 L 90.5,606 z',
         
           fill: 'blue',
         opacity: 0.5,
          scale: {x:1, y:1},
         draggable: true,       
       
      });
       /*croute continentale*/
var clicpath3 = new Kinetic.Path({
        x: 0,
        y: 0,
        data: 'm 196,234 -5,-14 6.5,-18.5 20,-5.5 30,-17.5 11.5,-8 194.5,3 29.5,-5.5 43.5,-32 27,-13.5 29,-3 31.5,1.5 22.5,6 17.5,6 19.5,19.5 10,6 7.5,2.5 12.5,1 15.5,10.5 103,0.5 -1,111.5 -34,-3.5 c -5.68331,1.43615 -11.35046,2.93627 -17,4.5 -9.0471,2.50413 -18.04905,5.17138 -27,8 l -23,41 -0.5,12.5 -19.5,32.5 -57,38 -43,4.5 -47,-2 -34.5,-10 -38,-17.5 -29,-22 -27,-35.5 -24.5,-39 -12.5,-12.5 -5,-8 -8.5,-3 c -15.32715,-1.24607 -30.66076,-2.41276 -46,-3.5 -26.98407,-1.91262 -53.98556,-3.57938 -81,-5 l -51,-30 z',
         
            fill: 'yellow', 
            opacity: 0.5,
            scale: {x:1, y:1},
         draggable: true,       
      });  
  
         /*croute océanique*/
var clicpath4 = new Kinetic.Path({
        x: 0,
        y: 0,
        data: 'M 85.5,229.5 86,199 l 129,-43 81.5,0.5 -12,5 -8,2 -19.5,7 -10,8.5 -19,11.5 -26,10.5 -2.5,0.5 -9,16 6.5,17 -111.5,-5 z',
         
            fill: 'red', 
            opacity: 0.5,
            scale: {x:1, y:1},
         draggable: true,       
      }); 
        
        
   <!-- variable pour définir Texte drag/drop --> 
        
        var text01 = new Kinetic.Text({
            x: stage.width()/100,
            y: stage.height()-100,
        text: 'Croûte Océanique',
        fontSize: '30',
        fontFamily: 'Lobster',
        fill: 'black',
       draggable: true,
      });
        
        
       
        
        var text02 = new Kinetic.Text({
            x: stage.width()/100 + 300,
            y: stage.height()-100,
        text: 'Croûte continentale',
        fontSize: '30',
        fontFamily: 'Lobster',
        fill: 'black',
       draggable: true,
      });
      
        var text03 = new Kinetic.Text({
            x: stage.width()/100 ,
            y: stage.height() - 50,
        text: 'manteau lithosphérique',
        fontSize: '30',
        fontFamily: 'Lobster',
        fill: 'black',
       draggable: true,
      });
      
        var text04 = new Kinetic.Text({
            x: stage.width()/100 + 300,
            y: stage.height()-50,
        text: 'Asthénosphère',
        fontSize: '30',
        fontFamily: 'Lobster',
        fill: 'black',
       draggable: true,
      });
     
	
  
        
  <!-- Définition de la palette de couleurs -->  
        
		var elements = new Array();
		for (var i=0; i<datas.length;i++) {
			elements[i] = new Kinetic.Path({
				data: datas[i].path,
				stroke: 'black',
				fill: 'white',
				strokeWidth: 5
			});
			elements[i].on("click", function(){
				this.fill(selected_color);
				layer.draw();
			});
            
            elements[i].on("touchstart", function(){
				this.fill(selected_color);           
				layer.draw();
			});
			
            layer.add(elements[i]);
		}
		
		var colors = new Array();
		for (var i=0; i<maPalette.length;i++) {
			colors[i] = new Kinetic.Rect({
				x: 100 + (i%6)*60,
				y: 50 + Math.floor(i/6)*60,
				width: 50,
				height: 50,
				stroke: 'black',
				fill: maPalette[i],
				strokeWidth: 2
			});
			colors[i].on("click", function(){
				selected_color = this.fill();
			});
            
            colors[i].on("touchstart", function(){
				selected_color = this.fill();
			});
			layer.add(colors[i]);
		}

		layer.draw();

       
/* couche pour recevoir DnD */
        
    layer3.add(clicpath1);
    layer3.add(clicpath2);
    layer3.add(clicpath3);
    layer3.add(clicpath4);    
    stage.add(layer3);
        
/*couche our recevoir les textes*/       
    layer2.add(text01);
    layer2.add(text02);
    layer2.add(text03);
    layer2.add(text04);
    stage.add(layer2);
    
 
        
        

        
        
   

		
	</script>

    
    
    
    <p id="info"></p>   
  
</body></html>